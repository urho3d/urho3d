# Очистка кэша CMake

Два события запускают workflow [main](workflows/main.yml), компилирующий движок:
* `push`, когда коммиты отправляются в репозиторий
* `pull_request`, когда создаётся PR с коммитами из другого репозитория или ветки

При `push` GitHub предоставляет
[массив `commits` с информацией о коммитах](https://docs.github.com/en/developers/webhooks-and-events/webhooks/webhook-events-and-payloads#push)
(максимальная длина массива - 20 коммитов), поэтому достаточно чтобы в названии или описании любого
коммита имелась фраза `[clear cache]`.

При `pull_request` изучение коммитов является сложной задачей.
Во первых GitHub не предоставляет массива с информацией о коммитах. Во вторых
коммиты из PR будут перемешаны с коммитами, которые были добавлены в `master`
за время работы над PR. Поэтому для PR фразу `[clear cache]` нужно добавить в
заголовок PR.

Если вы создали PR без `[clear cache]`, а потом обнаружили, что требуется очистка кэша,
то недостаточно просто переименовать PR и перезапустить worflow. После переименования нужно
добавить в PR новый коммит или переоткрыть PR
(нажать кнопку `Close pull request`, а потом `Reopen pull request`).
